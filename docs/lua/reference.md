# Lua 5.4 参考手册

## 1. 简介

Lua是一种功能齐全、执行高效、轻量级、可嵌入的脚本语言。支持面向过程、面向对象、函数式、数据驱动、资料定义等多种编程范式。

Lua具有简洁的过程语法、强大的字典数据结构、以及高度可扩展的语义。Lua是动态类型语言，通过寄存器虚拟机解释字节码运行，并具有自动内存管理和迭代式的垃圾回收机制，所以非常适合用于配置、逻辑脚本和快速原型的开发。

Lua以库的形式存在，基于Clean C(标准C和C++的公共子集)开发。Lua的发布版本中也有一个包含完整库和独立Lua解释器，可用于交互式和批处理使用的可执行文件`lua`。因此Lua既可以作为功能强大且轻量级的脚本语言嵌入到其他宿主程序，也可以作为功能强大、轻量级的独立语言。

作为扩展语言，Lua没有`main`函数的概念：它能潜入到其他程序中，这个被嵌入的程序称为宿主；或者作为独立程序使用，这个独立程序通常是指单独的`lua`可执行文件。可以执行一段Lua代码，可以写入或者读取Lua变量，也可以注册C函数给Lua使用。通过使用C函数，Lua可以增强其应对各种不同领域的能力，从而创建共享语法框架的定制编程语言。

Lua是开源免费软件，遵循Lua许可证(MIT许可证)发布。手册中描述的实现可在Lua的官方网站[lua.org](https://www.lua.org/)找到。

跟其他参考手册一样，本文档会比较枯燥。关于Lua背后设计原理，可以参考Lua网站上的[技术论文](https://www.lua.org/papers.html)。有关Lua编程更详细介绍，可以参考Roberto的[《Lua程序设计》](https://www.lua.org/pil/)。

## 2. 基本概念

### 2.1 值和类型

### 2.2 环境变量

### 2.3 错误处理

### 2.4 元表和元方法

### 2.5 垃圾回收

#### 2.5.1 增量式回收

#### 2.5.2 迭代式回收

#### 2.5.3 元方法回收

#### 2.5.4 弱表回收

### 2.6 协程

## 3. 语言

### 3.1 约定

### 3.2 变量

### 3.3 语句

#### 3.3.1 语句块

#### 3.3.2 代码块

#### 3.3.3 赋值

#### 3.3.4 控制结构

#### 3.3.5 For 循环

#### 3.3.6 函数调用

#### 3.3.7 局部声明

#### 3.3.8 待回收变量

### 3.4 表达式

#### 3.4.1 算术运算符

#### 3.4.2 位运算

#### 3.4.3 类型转换

#### 3.4.4 关系运算符

#### 3.4.5 逻辑运算符

#### 3.4.6 连接运算符

#### 3.4.7 长度运算符

#### 3.4.8 运算符优先级

#### 3.4.9 表构造器

#### 3.4.10 函数调用

#### 3.4.11 函数定义

#### 3.4.12 语句列表、多返回值及其调整

### 3.5 作用范围

## 4. C接口

### 4.1 堆栈

#### 4.1.1 堆栈大小

#### 4.1.2 有效索引

#### 4.1.3 字符串指针

### 4.2 闭包

### 4.3 注册表

### 4.4 错误处理函数

#### 4.4.1 状态码

### 4.5 协同程序

### 4.6 函数和类型

### 4.7 调试接口

## 5. 库函数

### 5.1 函数和类型

## 6. 标准库

### 6.1 基础函数

### 6.2 协程操作

### 6.3 模块

### 6.4 字符串操作

#### 6.4.1 模式匹配

#### 6.4.2 格式化

### 6.5 UTF-8 支持

### 6.6 表操作

### 6.7 数学函数

### 6.8 输入输出

### 6.9 操作系统

### 6.10 调试库

## 7. 独立程序

## 8. 兼容性

### 8.1 语言不

### 8.2 库

### 8.3 API

## 9. 完整语法
